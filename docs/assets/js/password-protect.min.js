!function(){"use strict";var e=window.protectedPageConfig||{},r=e.storageKey||"aquarius_arch_auth",t=e.passwordHash||"",o=e.redirectUrl||"/",n=e.maxAttempts||3,s=e.lockoutDuration||3e5,i=r+"_lockout",a=r+"_attempts";function d(){var e=parseInt(sessionStorage.getItem(a)||"0",10);return Math.max(0,n-e)}function c(){var e=document.createElement("div");e.id="password-protect-overlay",e.style.cssText="position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.85);z-index:10000;display:flex;align-items:center;justify-content:center;";var c=document.createElement("div");c.style.cssText="background:#fff;padding:2rem;border-radius:8px;max-width:400px;width:90%;text-align:center;box-shadow:0 4px 20px rgba(0,0,0,0.3);";var p=d();c.innerHTML='<style>.password-wrapper { position: relative; margin-bottom: 1rem; }#password-input { width: 100%; padding: 0.75rem 2.5rem 0.75rem 1rem; font-size: 1rem; border: 2px solid #ddd; border-radius: 4px; box-sizing: border-box; }.password-toggle-icon { position: absolute; top: 50%; right: 15px; transform: translateY(-50%); cursor: pointer; color: #777; }</style><h2 style="margin:0 0 1rem;color:#333;font-size:1.5rem;">üîí Gesch√ºtzter Bereich</h2><p style="margin:0 0 1.5rem;color:#666;">Dieser Bereich ist nur f√ºr autorisierte Trainingsteilnehmer zug√§nglich.</p><form id="password-form"><div class="password-wrapper"><input type="password" id="password-input" placeholder="Passwort eingeben" autocomplete="current-password" /><span id="toggle-password" class="password-toggle-icon"><i class="fas fa-eye"></i></span></div><div id="password-error" style="color:#dc3545;margin-bottom:1rem;display:none;"></div><button type="submit" style="width:100%;padding:0.75rem;font-size:1rem;background:#007bff;color:#fff;border:none;border-radius:4px;cursor:pointer;">Zugang anfordern</button></form><p style="margin:1rem 0 0;font-size:0.85rem;color:#999;">Verbleibende Versuche: <span id="attempts-count">'+p+'</span></p><a href="'+o+'" style="display:inline-block;margin-top:1rem;color:#666;text-decoration:none;font-size:0.9rem;">‚Üê Zur√ºck zur Startseite</a>',e.appendChild(c),document.body.appendChild(e);var u=document.getElementById("password-input");u.focus(),document.getElementById("toggle-password").addEventListener("click",function(){var e="password"===u.getAttribute("type")?"text":"password";u.setAttribute("type",e),this.querySelector("i").classList.toggle("fa-eye"),this.querySelector("i").classList.toggle("fa-eye-slash")});var l=document.getElementById("password-form");l.addEventListener("submit",async function(o){o.preventDefault();var c,p=u.value,g=document.getElementById("password-error"),m=document.getElementById("attempts-count");if(!p)return g.textContent="Bitte Passwort eingeben",void(g.style.display="block");try{if(await async function(e){var r=(new TextEncoder).encode(e),t=await crypto.subtle.digest("SHA-256",r);return Array.from(new Uint8Array(t)).map(function(e){return e.toString(16).padStart(2,"0")}).join("")}(p)===t)sessionStorage.setItem(r,"authenticated"),sessionStorage.removeItem(a),sessionStorage.removeItem(i),e.remove(),document.body.style.overflow="";else if(c=parseInt(sessionStorage.getItem(a)||"0",10)+1,sessionStorage.setItem(a,c.toString()),c>=n&&(sessionStorage.setItem(i,(Date.now()+s).toString()),!0))g.textContent="Zu viele Fehlversuche. Bitte warten Sie 5 Minuten.",g.style.display="block",u.disabled=!0,l.querySelector("button").disabled=!0;else{var f=d();m.textContent=f,g.textContent="Falsches Passwort. Noch "+f+" Versuch(e).",g.style.display="block",u.value="",u.focus()}}catch(e){g.textContent="Ein Fehler ist aufgetreten. Bitte versuchen Sie es erneut.",g.style.display="block",console.error("Password check error:",e)}}),document.body.style.overflow="hidden"}function p(){var e;"authenticated"!==sessionStorage.getItem(r)&&((e=parseInt(sessionStorage.getItem(i)||"0",10))>Date.now()||(e>0&&(sessionStorage.removeItem(i),sessionStorage.removeItem(a)),0)?function(){var e=document.createElement("div");e.style.cssText="position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.85);z-index:10000;display:flex;align-items:center;justify-content:center;";var r=document.createElement("div");r.style.cssText="background:#fff;padding:2rem;border-radius:8px;max-width:400px;width:90%;text-align:center;";var t=parseInt(sessionStorage.getItem(i)||"0",10),n=Math.max(0,t-Date.now()),s=Math.ceil(n/6e4);r.innerHTML='<h2 style="margin:0 0 1rem;color:#dc3545;">‚è≥ Zugang gesperrt</h2><p style="color:#666;">Zu viele fehlgeschlagene Anmeldeversuche.</p><p style="color:#666;">Bitte warten Sie noch <strong>'+s+' Minute(n)</strong>.</p><a href="'+o+'" style="display:inline-block;margin-top:1rem;padding:0.75rem 1.5rem;background:#6c757d;color:#fff;text-decoration:none;border-radius:4px;">Zur√ºck zur Startseite</a>',e.appendChild(r),document.body.appendChild(e),document.body.style.overflow="hidden"}():c())}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",p):p()}();